name: turtlebot3c-bringup
version: '0.1'
license: GPL-3.0
summary: TurtleBot3c core snap
description: |
  This snap automatically spawn a roscore and the core components for the
  TurtleBot3 (controller, robot_state_publisher etc).

  By default, the snap is configured for the 'waffle_pi' TurtleBot3 model.
  To select another robot model (waffle or burger) run the following,

    snap set turtlebot3c-bringup turtlebot3-model=burger

  Similarly, the snap is configured to consider the lidar model LDS-01.
  To select the other lidar for the robot run the following,

    snap set turtlebot3c-bringup lds-model=LDS-02

  This snap is meant to run on the TurtleBot3 robot.

grade: stable
confinement: strict
base: core22 # Humble

architectures:
  - build-on: amd64
  - build-on: arm64
  - build-on: armhf

parts:
  turtlebot3c-bringup:
    plugin: colcon
    source: https://github.com/ROBOTIS-GIT/turtlebot3.git
    source-branch: humble-devel
    source-subdir: turtlebot3_bringup

  # copy local scripts to the snap usr/bin
  local-files:
    plugin: dump
    source: snap/local/
    organize:
      '*.sh': usr/bin/

apps:
  core:
    daemon: simple
    environment:
      ROS_HOME: $SNAP_USER_DATA/ros
    command-chain: [usr/bin/ros_network.sh]
    command: usr/bin/core_launcher.sh
    plugs: [network, network-bind, raw-usb]
    extensions: [ros2-humble-ros-base]
